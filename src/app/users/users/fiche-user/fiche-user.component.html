<main class="nxl-container">
  <div class="nxl-content">
    <div class="col-lg-8 mx-auto py-5 px-lg-5">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <div class="d-flex align-items-center">
          <button class="btn btn-outline-secondary me-3" (click)="goBack()">
            <i class="fas fa-arrow-left"></i>
          </button>
          <h2 class="m-0 text-primary">Fiche employé</h2>
        </div>

        <div class="d-flex gap-3">
          <button
            (click)="deleteuser()"
            class="btn btn-uniform-height btn-outline-danger"
          >
            <i class="fas fa-trash me-2"></i> Supprimer
          </button>
          <button
            (click)="updateUser()"
            class="btn btn-uniform-height btn-primary"
          >
            <i class="fas fa-pen me-2"></i> Modifier
          </button>
        </div>
      </div>
      <div class="row">
        <div class="col-12">
          <form class="p-5 mt-3 rounded-4 bg-white shadow-sm needs-validation">
            <!-- Section Photo + Infos de base -->
            <div class="row align-items-start">
              <!-- Photo de profil -->
              <div class="col-lg-4 text-center mb-4 mb-lg-0">
                <div class="position-relative d-inline-block">
                  <img
                    class="rounded-circle object-fit-cover shadow"
                    [src]="image"
                    alt="Photo profil"
                    style="width: 200px; height: 200px"
                  />
                </div>
              </div>

              <!-- Infos utilisateur -->
              <div class="col-lg-8">
                <div class="row g-3 mb-3">
                  <div class="col-md-6">
                    <label class="form-label fw-medium text-secondary"
                      >Nom</label
                    >
                    <div class="input-group">
                      <span class="input-group-text"
                        ><i class="fas fa-user"></i
                      ></span>
                      <input
                        [readonly]="action == 'view'"
                        type="text"
                        class="form-control input-pro"
                        name="user.nom_utilisateur"
                        [(ngModel)]="user.nom_utilisateur"
                      />
                    </div>
                  </div>

                  <div class="col-md-6">
                    <label class="form-label fw-medium text-secondary"
                      >Prénom</label
                    >
                    <div class="input-group">
                      <span class="input-group-text"
                        ><i class="fas fa-user"></i
                      ></span>
                      <input
                        [readonly]="action == 'view'"
                        type="text"
                        class="form-control input-pro"
                        name="user.prenom_utilisateur"
                        [(ngModel)]="user.prenom_utilisateur"
                      />
                    </div>
                  </div>

                  <div class="col-md-6">
                    <label class="form-label fw-medium text-secondary"
                      >Sexe</label
                    >
                    <div class="input-group">
                      <span class="input-group-text"
                        ><i class="fas fa-venus-mars"></i
                      ></span>
                      <input
                        [readonly]="action == 'view'"
                        type="text"
                        class="form-control input-pro"
                        name="user.sexe"
                        [(ngModel)]="user.sexe"
                      />
                    </div>
                  </div>

                  <div class="col-md-6">
                    <label class="form-label fw-medium text-secondary"
                      >Point de vente</label
                    >
                    <div class="input-group">
                      <span class="input-group-text"
                        ><i class="fas fa-store"></i
                      ></span>
                      <input
                        [readonly]="action == 'view'"
                        type="text"
                        class="form-control input-pro"
                        name="user.point_de_vente_id"
                        [value]="getPointName(user.point_de_vente_id)"
                      />
                    </div>
                  </div>

                  <div class="col-md-6">
                    <label class="form-label fw-medium text-secondary"
                      >Rôle</label
                    >
                    <div class="input-group">
                      <span class="input-group-text"
                        ><i class="fas fa-briefcase"></i
                      ></span>
                      <input
                        [readonly]="action == 'view'"
                        type="text"
                        class="form-control input-pro"
                        name="user.role"
                        [(ngModel)]="user.role"
                      />
                    </div>
                  </div>

                  <div class="col-md-6">
                    <label class="form-label fw-medium text-secondary"
                      >Adresse</label
                    >
                    <div class="input-group">
                      <span class="input-group-text"
                        ><i class="fas fa-map-marker-alt"></i
                      ></span>
                      <input
                        [readonly]="action == 'view'"
                        type="text"
                        class="form-control input-pro"
                        name="user.adresse"
                        [(ngModel)]="user.adresse"
                      />
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Section Coordonnées -->
            <div class="row g-3 mb-3">
              <div class="col-md-6">
                <label class="form-label fw-medium text-secondary">Email</label>
                <div class="input-group">
                  <span class="input-group-text"
                    ><i class="fas fa-envelope"></i
                  ></span>
                  <input
                    [readonly]="action == 'view'"
                    type="text"
                    class="form-control input-pro"
                    name="user.email"
                    [(ngModel)]="user.email"
                  />
                </div>
              </div>

              <div class="col-md-6">
                <label class="form-label fw-medium text-secondary"
                  >Téléphone</label
                >
                <div class="input-group">
                  <span class="input-group-text"
                    ><i class="fas fa-phone"></i
                  ></span>
                  <input
                    [readonly]="action == 'view'"
                    type="text"
                    class="form-control input-pro"
                    name="user.telephone"
                    [(ngModel)]="user.telephone"
                  />
                </div>
              </div>
            </div>

            <!-- Section Dates -->
            <div class="row g-3">
              <div class="col-md-6">
                <label class="form-label fw-medium text-secondary"
                  >Date de création</label
                >
                <div class="input-group">
                  <span class="input-group-text"
                    ><i class="fas fa-calendar-plus"></i
                  ></span>
                  <input
                    [readonly]="action == 'view'"
                    type="text"
                    class="form-control input-pro"
                    name="user.cree_le"
                    [value]="globalService.formatDate(user.cree_le)"
                  />
                </div>
              </div>

              <div class="col-md-6">
                <label class="form-label fw-medium text-secondary"
                  >Date de modification</label
                >
                <div class="input-group">
                  <span class="input-group-text"
                    ><i class="fas fa-calendar-check"></i
                  ></span>
                  <input
                    [readonly]="action == 'view'"
                    type="text"
                    class="form-control input-pro"
                    name="user.mis_a_jour_le"
                    [value]="globalService.formatDate(user.mis_a_jour_le)"
                  />
                </div>
              </div>
            </div>

            <!-- Section Permissions -->
            <div class="mt-5">
              <div class="content">
                <span class="text-on-border fw-bold fs-5"
                  ><i class="fas fa-user-shield me-2"></i>Permissions</span
                >
                <div class="row mt-3">
                  <div class="col-lg-3">
                    <mat-checkbox
                      [(ngModel)]="user.ventes"
                      name="ventes"
                      class="checkbox-pro"
                    >
                      <i class="fas fa-shopping-cart me-2"></i>Ventes
                    </mat-checkbox>
                  </div>
                  <div class="col-lg-3">
                    <mat-checkbox
                      [(ngModel)]="user.produits"
                      name="produits"
                      class="checkbox-pro"
                    >
                      <i class="fas fa-box-open me-2"></i>Produits
                    </mat-checkbox>
                  </div>
                  <div class="col-lg-3">
                    <mat-checkbox
                      [(ngModel)]="user.stock"
                      name="stock"
                      class="checkbox-pro"
                    >
                      <i class="fas fa-warehouse me-2"></i>Stock
                    </mat-checkbox>
                  </div>
                  <div class="col-lg-3">
                    <mat-checkbox
                      [(ngModel)]="user.analytics"
                      name="analytics"
                      class="checkbox-pro"
                    >
                      <i class="fas fa-chart-line me-2"></i>Analytics
                    </mat-checkbox>
                  </div>
                         <div class="col-lg-3">
                    <mat-checkbox [(ngModel)]="user.commandes" name="commandes" class="checkbox-pro">
                      <i class="fas fa-clipboard-list me-2"></i>Commandes
                    </mat-checkbox>
                  </div>
                </div>
              </div>
            </div>

            <!-- Boutons d'action -->
          </form>
        </div>
      </div>
    </div>
  </div>
</main>
